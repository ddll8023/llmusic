# LLMusic 本地音乐播放器 - 综合开发文档

## 1. 项目概述

一个基于 Electron 和 Vue.js 的桌面音乐播放器。应用的核心功能是扫描、管理和播放本地音频文件，提供一个美观、响应迅速的用户界面。

### 核心功能

- **多音乐库管理**: 支持添加、管理和切换多个独立的本地音乐库。
- **本地音乐管理**: 扫描并管理本地音乐库。
- **播放控制**: 提供完整的播放控制（播放/暂停、上一曲/下一曲）。
- **播放模式**: 支持多种播放模式（顺序、随机、单曲循环）。
- **播放次数统计**: 记录并显示每首歌曲的播放次数，并支持排序。
- **状态持久化**: 记忆播放列表和播放模式，重启应用后恢复上次播放状态。
- **界面优化**:
  - 可收缩侧边栏，优化界面空间利用。
  - 虚拟滚动技术，支持海量歌曲流畅列表。
  - 歌曲右键菜单，快速执行常用操作。
- **音频特性**:
  - 专辑封面显示。
  - 音量控制。
- **系统集成**:
  - 支持最小化到系统托盘，可在设置中选择关闭行为。

## 2. 技术栈

- **核心框架:** Electron (`^36.4.0`), Vue.js 3 (`^3.5.16`)
- **状态管理:** Pinia (`^3.0.3`)
- **UI 性能:** `vue-virtual-scroller` (用于处理大数据列表的虚拟滚动)
- **构建工具:** Vite (`^6.3.5`)
- **数据库:** `lowdb` (`^7.0.1`) (一个基于 JSON 文件的轻量级数据库)
- **音频元数据:** `music-metadata` (`^11.2.3`)
- **音频处理:** `ffmpeg-static` 和 `fluent-ffmpeg`
- **唯一 ID 生成:** `uuid` (`^11.1.0`)
- **样式:** CSS3
- **进程间通信:** Electron IPC

## 3. 项目结构

- **`src-main/`**: Electron 主进程代码
  - `main.js`: Electron 主入口
  - `database.js`: 使用 lowdb 的数据库模块
  - `musicScanner.js`: 音乐文件扫描模块
  - `preload.js`: 预加载脚本，暴露安全的 API
  - `ipc-handlers/`: 全新的 IPC 处理目录，按功能域拆分
    - `index.js`: 统一注册与卸载所有处理模块
    - `windowHandlers.js`: 窗口控制与剪贴板/文件位置
    - `scanHandlers.js`: 音乐扫描、取消与进度推送
    - `songHandlers.js`: 歌曲 / 歌词 / 封面 / 播放控制
    - `playlistHandlers.js`: 播放列表 CRUD
    - `libraryHandlers.js`: 音乐库 CRUD
  - `utils/`: 主进程通用工具
    - `throttle.js`: 通用节流函数
    - `lruCache.js`: 简易 LRU 缓存实现
    - `ipcWrapper.js`: IPC 注册封装，统一错误处理与可选节流
  - `constants/ipcChannels.js`: IPC 通道名称常量中心
  - `audioProcessor.js`: 音频处理服务，负责音频文件验证、转换和元数据提取
  - **歌词解析器 (`lyricsParser.js`)**: 负责解析 `.lrc` 歌词文件，提取时间轴与歌词文本。
- **`src-renderer/`**: Vue 渲染进程代码
  - `main.js`: Vue 应用入口
  - `App.vue`: 根组件
  - **`components/`**: Vue 组件
    - `SideBar.vue`: 左侧导航栏（支持收缩/展开），包含到本地音乐、设置、我的收藏（未实现）等功能的导航。
    - `MainContent.vue`: 中间主内容区
    - `PlayerBar.vue`: 底部播放器控制栏
    - `Icon.vue`: 图标组件
    - `Settings.vue`: 设置页面组件
  - **`store/`**: Pinia 状态管理
    - `media.js`: 管理音乐库
    - `player.js`: 管理播放器状态
    - `ui.js`: 管理 UI 状态（如侧边栏收缩）
  - **`assets/`**: 静态资源
    - `icons.js`: SVG 图标集合

## 5. 开发指南

### 5.1. 核心模块设计

#### **主进程 (Main Process)**

- **窗口管理 (`main.js`)**: 创建和管理 `BrowserWindow`，配置尺寸、标题等，并隐藏默认菜单栏。支持最小化到托盘功能。
- **数据库模块 (`database.js`)**: 使用 `lowdb` 初始化 JSON 数据库，提供歌曲数据的增删改查接口，**新增内存索引 Map（songById / songByPath）以提升查询性能**。
- **音乐扫描模块 (`musicScanner.js`)**: 递归扫描指定目录的音频文件，使用 `music-metadata` 解析元数据和封面，并将结果存入数据库。通过 IPC 向渲染进程报告进度。
- **IPC 接口 (`ipc-handlers/index.js`)**: 集中处理所有来自渲染进程的请求，如 `'scan-music-start'`, `'get-songs'`, `'get-song-cover/:songId'` 等。

#### **渲染进程 (Renderer Process)**

- **UI 布局 (Vue Components)**:
  - `App.vue`: 根组件，组织三大布局区域（侧边栏、主内容区、播放器栏）。
  - `MainContent.vue`: 使用虚拟滚动高效渲染歌曲列表，并包含定位、返回顶部等快捷按钮。
  - `PlayerBar.vue`: 底部播放器，管理播放控件。
- **状态管理 (Pinia)**:
  - `useMediaStore`: 存储音乐库列表。
  - `usePlayerStore`: 管理当前播放状态，包括当前歌曲、播放/暂停状态、进度、音量、播放模式等。支持通过 localStorage 持久化存储状态，在应用重启后自动恢复播放列表、播放模式和音量设置。
  - `useUiStore`: 管理 UI 状态，包括侧边栏显示/隐藏、歌词动画效果和窗口关闭行为等设置。
- **IPC 通信 (`preload.js`)**: 遵循 Electron 安全实践，安全地将主进程提供的 IPC 接口暴露给渲染进程 (e.g., `window.electronAPI.getSongs()`)。

### 5.2. 开发规范

- **Store Action 命名**:
  - 直接设置状态的 Actions 使用 `set<StateName>` 格式 (e.g., `setPlaying(true)`)。
  - 执行切换或复杂逻辑的 Actions 使用描述其行为的动词 (e.g., `togglePlay`, `playNext`)。
  - 这有助于在组件中调用 Actions 时，使意图更加清晰。
- **进程职责分离**:
  - **主进程**: 负责所有与 Node.js API、文件系统和数据库相关的操作。
  - **渲染进程**: 专注于 UI 渲染和用户交互，通过 `preload.js` 暴露的接口与主进程通信。

## 6. 开发路线图

### Phase 1: 核心功能 (已完成)

- [x] **环境搭建**: 完成项目初始化、依赖安装和构建配置。
- [x] **Electron 基础框架**: 成功创建和管理窗口，并加载 Vue 应用。
- [x] **主进程核心功能**:
  - [x] 数据库模块 (`lowdb`)
  - [x] 音乐扫描与元数据解析
- [x] **渲染进程 UI 与逻辑**:
  - [x] 三栏式 UI 布局
  - [x] Pinia 状态管理
  - [x] 虚拟滚动歌曲列表
  - [x] 播放器控制条
- [x] **功能联调**:
  - [x] 实现从列表点击播放
  - [x] "扫描/同步"功能
  - [x] UI 样式初步完善

### Phase 2: 功能增强 (约 70%完成)

- [✅] **歌词显示**:
  - [x] 支持 `.lrc` 文件解析与滚动显示。
  - [x] 无歌词时提供占位或提示。
  - [x] 鼠标悬停在歌词行上时，在左侧显示对应时间和播放图标。
  - [x] 支持歌词字体大小调整。
  - [x] 支持歌词时间偏移调整(+/-0.5 秒)。
  - [x] 支持点击歌词跳转到对应时间点。
- [✅] **搜索功能**:
  - [x] 在本地音乐头部添加搜索框
  - [x] 实现基于歌曲名、歌手、专辑的实时筛选
  - [x] 采用防抖技术优化搜索性能
- [⚠️] **播放列表管理**:
  - [ ] 允许用户创建、命名和编辑多个播放列表。
  - [⚠️] 实现将歌曲添加到指定播放列表的功能。(仅实现了单一播放列表)
- [✅] **播放次数统计**: 记录每首歌曲的播放次数，并在歌曲列表中展示和排序。
- [✅] **歌曲右键菜单**: 支持右键点击歌曲显示菜单，包含播放/暂停、添加到播放列表、显示歌词、查看信息、显示文件位置、复制信息、从列表中删除等功能。
- **歌曲删除功能**: 支持从音乐库中删除单个歌曲，包含确认对话框、数据库记录清理、播放列表引用清理和播放状态处理。
- [✅] **多音乐库管理**: 支持添加、管理和切换多个独立的本地音乐库。
- [✅] **封面图片获取**: 支持专辑封面显示。
- [ ] **歌曲信息展示**
- [ ] **音频可视化**
- [ ] **音频均衡器 (Audio Equalizer)**
- [ ] **Mini 播放器模式 (Mini Player Mode)**
- [✅] **元数据标签编辑器 (Tag Editor)**: 支持编辑音频文件的元数据标签，包括标题、艺术家、专辑、年份等核心字段
- [ ] **我的收藏功能 (Favorites)**
- [ ] 播放列表导入 / 导出（JSON 格式）
- [ ] 播放列表批量编辑（多选删除、拖拽排序）

### Phase 3: 体验优化与重构 (约 60%完成)

- [✅] **自定义标题栏**:
  - [x] 使用 Electron 的无边框窗口功能
  - [x] 实现自定义标题栏，包含应用图标、标题和窗口控制按钮
  - [x] 支持拖拽窗口、最小化、最大化/还原和关闭功能
  - [x] 与应用整体界面风格一致
- [✅] **歌词动画效果设置功能**:
  - [x] 在设置页面中添加歌词页面动画效果选项
  - [x] 支持两种动画效果：淡入淡出和上滑动画
  - [x] 用户设置会保存在 localStorage 中，下次打开应用时保持一致
- [✅] **播放状态记忆化功能**:
  - [x] 记忆播放列表和播放模式，重启应用后恢复
  - [x] 保存音量和静音状态设置
  - [x] 恢复上一次播放的歌曲（不自动播放）
  - [x] 所有状态在发生变化时自动保存
- [✅] **窗口关闭行为设置**:
  - [x] 在设置页面添加窗口关闭行为选项
  - [x] 支持两种行为：退出应用或最小化到托盘
  - [x] 最小化到托盘时显示托盘图标和菜单
  - [x] 点击托盘图标可恢复窗口
- [✅] **可收缩侧边栏**: 支持侧边栏展开/收缩切换，优化界面空间利用。
- [✅] **虚拟滚动**: 使用 vue-virtual-scroller 实现高效的大列表渲染，支持滚动到顶部和定位到当前播放歌曲。
- [✅] **音频处理模块重构**: 重构了主进程中的音频处理模块，分离为核心处理模块和兼容层，优化了音频处理参数，增强了错误处理和文件格式验证。
- [ ] **主题系统**
- [ ] **快捷键支持**
- [ ] **性能与架构**:
  - [ ] **数据库升级**
  - [⚠️] **代码重构**:
    - [✅] 音频处理模块重构
    - [ ] 其他模块重构

## 7. 功能实现状态

### 功能实现状态详细表格

| 功能                        | 状态          | 说明                                                                                                                                                         |
| --------------------------- | ------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Phase 1: 核心功能**       | ✅ 已完成     | 所有核心功能均已实现                                                                                                                                         |
| **Phase 2: 功能增强**       | ⚠️ 约 70%完成 | 主要功能已实现，部分高级功能待开发                                                                                                                           |
| - 歌词显示                  | ✅ 已完成     | 支持 LRC 解析与滚动显示，无歌词时有提示，支持多种动画效果，悬停时显示时间和播放图标，支持字体大小调整和时间偏移调整(+/-0.5 秒)，支持点击歌词跳转到对应时间点 |
| - 搜索功能                  | ✅ 已完成     | 在本地音乐头部添加了搜索框，支持对歌名、歌手、专辑进行实时、防抖筛选，搜索结果立即显示                                                                       |
| - 播放列表管理              | ⚠️ 部分完成   | 仅实现单一播放列表，支持播放列表记忆功能，未实现多播放列表                                                                                                   |
| - 播放次数统计              | ✅ 已完成     | 歌曲播放完毕后自动记录播放次数，并在主列表视图中展示，支持按播放次数排序。                                                                                   |
| - 歌曲右键菜单              | ✅ 已完成     | 支持右键点击歌曲显示菜单，包含播放/暂停、添加到播放列表、显示歌词、查看信息、显示文件位置、复制信息、从列表中删除等功能                                      |
| - 歌曲删除功能              | ✅ 已完成     | 支持从音乐库中删除单个歌曲，包含确认对话框、数据库记录清理、播放列表引用清理和播放状态处理，确保数据一致性                                                   |
| - 多音乐库管理              | ✅ 已完成     | 支持在设置页面添加、移除和重新扫描多个音乐库。支持在侧边栏切换不同的库视图以及"所有音乐"视图。                                                               |
| - 封面图片获取              | ✅ 已完成     | 支持专辑封面显示                                                                                                                                             |
| - 元数据标签编辑器          | ✅ 已完成     | 支持编辑音频文件的元数据标签，包括标题、艺术家、专辑、年份等核心字段，支持多种音频格式，具备完善的验证和错误处理机制                                         |
| - 歌曲信息展示              | ❌ 未实现     | 未实现歌曲详情页面                                                                                                                                           |
| - 我的收藏                  | ❌ 未实现     | UI 入口已添加在侧边栏，功能待实现                                                                                                                            |
| - 音频可视化                | ❌ 未实现     | 未实现音频频谱或波形图                                                                                                                                       |
| **Phase 3: 体验优化与重构** | ⚠️ 约 60%完成 | 核心体验优化已完成，高级功能待开发                                                                                                                           |
| - 自定义标题栏              | ✅ 已完成     | 使用无边框窗口配合自定义组件实现，支持拖拽、最小化、最大化/还原、关闭功能，与应用整体风格一致                                                                |
| - 歌词动画效果设置功能      | ✅ 已完成     | 支持淡入淡出和上滑动画效果，设置保存在 localStorage，可在设置页面中切换                                                                                      |
| - 播放状态记忆化            | ✅ 已完成     | 记忆播放列表、播放模式、音量、当前歌曲等，重启应用后自动恢复，通过 localStorage 实现                                                                         |
| - 可收缩侧边栏              | ✅ 已完成     | 支持侧边栏展开/收缩切换，优化界面空间利用                                                                                                                    |
| - 虚拟滚动                  | ✅ 已完成     | 使用 vue-virtual-scroller 实现高效的大列表渲染，支持滚动到顶部和定位到当前播放歌曲                                                                           |
| - 窗口关闭行为设置          | ✅ 已完成     | 支持在设置中选择关闭窗口时的行为：退出应用或最小化到托盘，设置保存在 localStorage                                                                            |
| - 音频处理模块重构          | ✅ 已完成     | 重构了主进程中的音频处理模块，分离为核心处理模块和兼容层，优化了音频处理参数，增强了错误处理和文件格式验证                                                   |
| - 主题系统                  | ❌ 未实现     | 未实现多主题切换功能                                                                                                                                         |
| - 快捷键支持                | ❌ 未实现     | 未实现全局快捷键和应用内快捷键                                                                                                                               |
| - 国际化 (i18n)             | ❌ 未实现     | 未实现多语言支持                                                                                                                                             |

## 项目文件结构与功能说明

### 主进程文件 (src-main/)

| 文件路径             | 功能说明                                                      | 状态      | 备注                       |
| -------------------- | ------------------------------------------------------------- | --------- | -------------------------- |
| `main.js`            | Electron 主进程入口，负责应用生命周期管理、窗口创建、托盘集成 | ✅ 正常   | 核心启动文件               |
| `database.js`        | 数据库模块，使用 lowdb 管理歌曲、播放列表、音乐库数据         | ✅ 正常   | 包含内存索引优化           |
| `musicScanner.js`    | 音乐文件扫描引擎，递归扫描目录并解析音频元数据                | ✅ 正常   | 支持多格式音频文件         |
| `audioProcessor.js`  | 音频处理服务，负责音频文件验证、转换和元数据提取              | ✅ 正常   | 重构后的核心模块           |
| `lyricsParser.js`    | 歌词解析器，解析 LRC 格式歌词文件                             | ✅ 正常   | 已重构优化                 |
| `tagEditor.js`       | 标签编辑器核心模块，处理音频文件标签读写                      | ✅ 正常   | 新增功能模块               |
| `preload.js`         | 预加载脚本，安全地暴露主进程 API 给渲染进程                   | ✅ 正常   | 遵循 Electron 安全实践     |
| `scannerWorker.js`   | 扫描工作进程                                                  | ✅ 正常   | 后台扫描处理               |
| ~~`ipcHandlers.js`~~ | ~~旧版 IPC 处理器~~                                           | ✅ 已清理 | 已完全迁移到新的模块化结构 |

### IPC 处理模块 (src-main/ipc-handlers/)

| 文件路径              | 功能说明                                | 状态    | 备注             |
| --------------------- | --------------------------------------- | ------- | ---------------- |
| `index.js`            | 统一注册与卸载所有 IPC 处理模块         | ✅ 正常 | 模块化管理入口   |
| `windowHandlers.js`   | 窗口控制、剪贴板、文件位置相关 IPC 处理 | ✅ 正常 | 系统集成功能     |
| `scanHandlers.js`     | 音乐扫描、取消与进度推送 IPC 处理       | ✅ 正常 | 扫描流程管理     |
| `songHandlers.js`     | 歌曲、歌词、封面、播放控制 IPC 处理     | ✅ 正常 | 核心音乐功能     |
| `tagHandlers.js`      | 标签编辑相关 IPC 处理                   | ✅ 正常 | 新增标签编辑功能 |
| `playlistHandlers.js` | 播放列表 CRUD 操作 IPC 处理             | ✅ 正常 | 播放列表管理     |
| `libraryHandlers.js`  | 音乐库 CRUD 操作 IPC 处理               | ✅ 正常 | 多音乐库支持     |

### 工具模块 (src-main/utils/)

| 文件路径        | 功能说明                             | 状态    | 备注         |
| --------------- | ------------------------------------ | ------- | ------------ |
| `throttle.js`   | 通用节流函数                         | ✅ 正常 | 性能优化工具 |
| `lruCache.js`   | 简易 LRU 缓存实现                    | ✅ 正常 | 内存管理优化 |
| `ipcWrapper.js` | IPC 注册封装，统一错误处理与可选节流 | ✅ 正常 | IPC 通信优化 |

### 常量定义 (src-main/constants/)

| 文件路径         | 功能说明             | 状态    | 备注             |
| ---------------- | -------------------- | ------- | ---------------- |
| `ipcChannels.js` | IPC 通道名称常量中心 | ✅ 正常 | 统一管理通信通道 |

### 渲染进程文件 (src-renderer/)

| 文件路径     | 功能说明             | 状态    | 备注           |
| ------------ | -------------------- | ------- | -------------- |
| `main.js`    | Vue 应用入口文件     | ✅ 正常 | 应用初始化     |
| `App.vue`    | 根组件，组织整体布局 | ✅ 正常 | 三栏式布局管理 |
| `index.html` | HTML 模板文件        | ✅ 正常 | 应用容器       |

### Vue 组件 (src-renderer/components/)

| 文件路径                  | 功能说明                  | 状态        | 备注                   |
| ------------------------- | ------------------------- | ----------- | ---------------------- |
| `TitleBar.vue`            | 自定义标题栏组件          | ✅ 正常     | 无边框窗口标题栏       |
| `SideBar.vue`             | 左侧导航栏，支持收缩/展开 | ✅ 正常     | 音乐库切换、导航功能   |
| `MainContent.vue`         | 主内容区，歌曲列表显示    | ✅ 正常     | 虚拟滚动、搜索功能     |
| `PlayerBar.vue`           | 底部播放器控制栏          | ✅ 正常     | 播放控制、进度条、音量 |
| `LyricPage.vue`           | 歌词页面组件              | ✅ 正常     | 歌词显示、滚动、交互   |
| `Settings.vue`            | 设置页面组件              | ✅ 正常     | 音乐库管理、界面设置   |
| `LocalMusicHeader.vue`    | 本地音乐头部组件          | ✅ 正常     | 搜索框、排序功能       |
| `Icon.vue`                | 图标组件                  | ✅ 正常     | SVG 图标渲染           |
| `ContextMenu.vue`         | 右键菜单组件              | ✅ 正常     | 歌曲操作菜单           |
| `DeleteConfirmDialog.vue` | 删除确认对话框组件        | ✅ 正常     | 歌曲删除确认功能       |
| `TagEditor.vue`           | 标签编辑器组件            | ✅ 正常     | 新增音频标签编辑功能   |
| `GlobalScanProgress.vue`  | 全局扫描进度组件          | ✅ 正常     | 扫描状态显示           |
| `Playlist.vue`            | 播放列表组件              | ✅ 正常     | 播放队列显示           |
| `PlaylistContent.vue`     | 播放列表内容组件          | ✅ 正常     | 播放列表歌曲管理       |
| `PlaylistManage.vue`      | 播放列表管理组件          | ⚠️ 部分实现 | 仅支持单一播放列表     |

### 状态管理 (src-renderer/store/)

| 文件路径      | 功能说明         | 状态    | 备注                     |
| ------------- | ---------------- | ------- | ------------------------ |
| `media.js`    | 媒体库状态管理   | ✅ 正常 | 歌曲列表、音乐库、搜索   |
| `player.js`   | 播放器状态管理   | ✅ 正常 | 播放状态、歌词、播放模式 |
| `playlist.js` | 播放列表状态管理 | ✅ 正常 | 播放列表 CRUD 操作       |
| `ui.js`       | UI 状态管理      | ✅ 正常 | 界面状态、用户偏好设置   |

### 静态资源 (src-renderer/assets/)

| 文件路径          | 功能说明     | 状态    | 备注             |
| ----------------- | ------------ | ------- | ---------------- |
| `icons.js`        | SVG 图标集合 | ✅ 正常 | 应用内图标定义   |
| `default_img.jpg` | 默认专辑封面 | ✅ 正常 | 无封面时的占位图 |
| `tray-icon.png`   | 系统托盘图标 | ✅ 正常 | 托盘显示图标     |

### 样式文件 (src-renderer/styles/)

| 目录/文件     | 功能说明                 | 状态      | 备注               |
| ------------- | ------------------------ | --------- | ------------------ |
| `main.scss`   | 主样式文件               | ✅ 正常   | 样式入口           |
| `abstracts/`  | 抽象样式（变量、混合等） | ✅ 正常   | SCSS 工具          |
| `base/`       | 基础样式                 | ✅ 正常   | 重置、基础元素样式 |
| `components/` | 组件样式                 | ✅ 正常   | 各组件专用样式     |
| `layout/`     | 布局样式                 | ✅ 正常   | 页面布局样式       |
| `themes/`     | 主题样式                 | ❌ 未实现 | 多主题支持待开发   |

### 配置文件

| 文件路径         | 功能说明           | 状态    | 备注           |
| ---------------- | ------------------ | ------- | -------------- |
| `package.json`   | 项目配置和依赖管理 | ✅ 正常 | NPM 包配置     |
| `vite.config.js` | Vite 构建配置      | ✅ 正常 | 开发和构建配置 |
| `build.bat`      | Windows 构建脚本   | ✅ 正常 | 快速构建命令   |
| `start.bat`      | Windows 启动脚本   | ✅ 正常 | 快速启动命令   |

## 项目整体状态评估

### ✅ 运行正常的功能

- **核心播放功能**: 播放/暂停、上一曲/下一曲、播放模式切换、音量控制等基础功能完整
- **多音乐库管理**: 支持添加、删除、重新扫描多个音乐库，库间切换流畅
- **歌词显示功能**: LRC 歌词解析、滚动显示、动画效果、交互功能完整
- **搜索和排序**: 实时搜索、多字段筛选、播放次数排序等功能正常
- **标签编辑功能**: 完整的音频文件元数据标签编辑器，支持多种音频格式，具备验证和错误处理
- **UI 交互体验**: 虚拟滚动、右键菜单、侧边栏收缩、自定义标题栏等体验良好
- **状态持久化**: 播放状态、用户设置、播放列表等数据持久化稳定
- **系统集成**: 托盘功能、窗口管理、文件关联等系统集成完善

### ⚠️ 需要注意的问题

- **功能限制**: 播放列表管理仅支持单一播放列表，多播放列表功能架构已搭建但未完全实现
- **主题系统**: 样式目录结构已建立但多主题切换功能未实现

### ❌ 缺失的功能

- **歌曲详情页面**: 缺少歌曲元数据详细展示页面
- **我的收藏功能**: UI 入口已存在但后端逻辑未实现
- **音频可视化**: 缺少音频频谱、波形图等可视化效果
- **高级功能**: 音频均衡器、Mini 播放器模式等未实现
- **系统功能**: 多主题支持、全局快捷键、国际化、自动更新等未实现
- **开发工具**: 单元测试、性能监控、错误报告等开发辅助功能缺失

### 📊 完成度统计

- **Phase 1 (核心功能)**: 100% ✅
- **Phase 2 (功能增强)**: 约 80% ⚠️ (新增标签编辑器和歌曲删除功能)
- **Phase 3 (体验优化)**: 约 60% ⚠️
- **整体项目完成度**: 约 80%

### 🔧 建议的后续开发重点

1. **完善播放列表管理**: 实现多播放列表创建、编辑、删除功能
2. **实现我的收藏功能**: 添加歌曲收藏的后端逻辑和 UI 交互
3. **开发歌曲详情页面**: 提供完整的歌曲元数据展示功能
4. **代码清理和优化**: 移除废弃文件，优化代码结构
5. **添加主题系统**: 实现多主题切换功能
6. **增强用户体验**: 添加快捷键支持、音频可视化等功能

总体而言，LLMusic 项目已具备完整的核心音乐播放功能，代码结构清晰，架构设计合理，具备良好的可维护性和扩展性。项目已达到可用状态，适合日常使用，后续可根据用户需求逐步完善高级功能。

## 更新日志

### 2025-01-06 - 文件关联功能

- ✅ **添加音频文件关联配置**：在 package.json 中配置支持 MP3, FLAC, WAV, M4A, OGG, AAC 格式的文件关联
- ✅ **实现通过"打开方式"启动应用**：用户可以右键音乐文件选择 LLMusic 打开，应用会自动启动并播放该文件
- ✅ **添加单实例控制**：防止多个应用实例同时运行，确保系统资源的合理使用
- ✅ **支持已运行实例接收新文件**：当应用已运行时，新的文件打开请求会发送到现有实例
- ✅ **添加命令行参数解析**：正确解析通过文件关联传递的文件路径参数
- ✅ **完善文件打开的 IPC 通信**：在主进程和渲染进程之间建立文件打开的通信机制

**修改的文件：**

- `package.json`: 添加 fileAssociations 配置
- `src-main/main.js`: 添加单实例控制、命令行参数处理、文件打开处理逻辑
- `src-main/preload.js`: 添加文件打开事件的 API 接口
- `src-renderer/App.vue`: 添加文件打开事件监听和处理逻辑

**功能说明：**
用户现在可以在文件管理器中右键点击音乐文件，选择"打开方式" → "LLMusic"，应用会自动启动并开始播放选中的音乐文件。如果应用已经在运行，新的文件会在当前实例中打开播放。

**技术实现：**

- 使用 `app.requestSingleInstanceLock()` 确保只有一个应用实例运行
- 通过 `process.argv` 解析命令行参数获取文件路径
- 使用 `parseSongFromFile` 解析音频文件元数据
- 直接调用 `playerStore.playSong()` 播放文件，无需将文件添加到数据库
- 支持 MP3、FLAC、WAV、M4A、OGG、AAC 等主流音频格式

**测试状态：** ✅ 已测试通过，功能正常工作
